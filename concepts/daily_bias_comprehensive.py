"""
Daily Bias - ICT Concept
COMPREHENSIVE GUIDE - Maximum Detail
"""

CONCEPT_DATA = {
    'title': 'Daily Bias',
    'short_name': 'DAILY_BIAS',
    'category': 'ICT Core Concepts - Market Structure',
    
    'summary': '''Daily Bias is your directional expectation for the trading day based on higher timeframe analysis. 
It determines whether you look exclusively for long setups or short setups. Your daily bias is the single most 
important decision you make before entering the market each day. Trading without a clear daily bias is like 
sailing without knowing which direction the wind is blowing - you'll get tossed around by every wave.''',
    
    'key_points': [
        'Determined BEFORE the trading day begins using daily and weekly charts',
        'Based on market structure, trend direction, and key price levels',
        'Bullish bias = ONLY take long setups; Bearish bias = ONLY take short setups',
        'Can change intraday if daily structure shifts significantly (MSS/CHoCH)',
        'Must align with weekly range positioning for highest probability',
        'Previous day high (PDH) and low (PDL) are critical reference points',
        'Daily bias overrides all lower timeframe signals',
        'Wrong bias = most trades will lose regardless of execution quality',
        'Neutral/ranging days = reduce trading activity or skip',
        'Your bias should be written down before market open and followed strictly'
    ],
    
    'definition': '''
═══════════════════════════════════════════════════════════════════
WHAT IS DAILY BIAS?
═══════════════════════════════════════════════════════════════════

Daily Bias is your predetermined directional expectation for how price will move 
during the current trading day. It's not a guess or a feeling - it's a systematic 
analysis based on higher timeframe market structure and price positioning.

Think of daily bias as your "trading compass" for the day:
• Bullish Bias = North (only look for longs)
• Bearish Bias = South (only look for shorts)  
• Neutral/No Bias = Don't trade or reduce size significantly

The Power of Daily Bias:
-----------------------
• Eliminates 50% of potential trades (wrong direction)
• Increases win rate dramatically (30-40% improvement)
• Prevents overtrading and emotional decisions
• Aligns you with institutional order flow
• Provides clear framework for entries and exits

Without Daily Bias:
------------------
❌ Taking random trades in both directions
❌ Getting chopped up in consolidation
❌ Fighting the dominant market flow
❌ Lower win rate and higher stress
❌ Inconsistent results


═══════════════════════════════════════════════════════════════════
HOW TO DETERMINE DAILY BIAS - THE COMPLETE PROCESS
═══════════════════════════════════════════════════════════════════

STEP 1: Weekly Structure Analysis (Do This Sunday Night)
--------------------------------------------------------

A. Check Weekly Trend:
   □ Is price trending up (higher highs, higher lows)?
   □ Is price trending down (lower highs, lower lows)?
   □ Is price ranging/consolidating?

B. Identify Weekly Range Position:
   □ Calculate weekly high and low
   □ Mark 50% equilibrium level
   □ Determine if in premium, equilibrium, or discount

   Premium (upper 1/3): Price is expensive → Look for sells
   Equilibrium (middle 1/3): Mixed → Use caution
   Discount (lower 1/3): Price is cheap → Look for buys

C. Note Key Weekly Levels:
   □ Previous week high/low
   □ Weekly FVGs
   □ Weekly order blocks
   □ Major liquidity pools


STEP 2: Daily Chart Analysis (Do This Each Evening)
---------------------------------------------------

A. Review Daily Market Structure:
   □ Are we making higher highs and higher lows? (Bullish)
   □ Are we making lower highs and lower lows? (Bearish)
   □ Did structure break today? (Potential bias change)

B. Check Previous Day's Price Action:
   □ Where did we close relative to the daily range?
      - Upper 25% close = bullish
      - Lower 25% close = bearish
      - Middle 50% = neutral/ranging

   □ Did we break previous day high (PDH)? = Bullish
   □ Did we break previous day low (PDL)? = Bearish
   □ Did we stay inside previous day range? = Ranging

C. Identify Daily Objectives:
   □ What are the next logical targets above?
   □ What are the next logical targets below?
   □ Which direction has less resistance?

D. Check Daily Positioning:
   □ Are we in discount of weekly range? (Bullish bias favored)
   □ Are we in premium of weekly range? (Bearish bias favored)
   □ Are we at equilibrium? (Wait for clearer direction)


STEP 3: Session Analysis (Morning Before Trading)
-------------------------------------------------

A. Asian Session Review (7PM-2AM EST):
   □ Did Asian session break PDH or PDL?
   □ Did it create FVGs?
   □ Which side did it sweep liquidity?

B. London Session Review (2AM-5AM EST):
   □ London is the most important session for bias
   □ Did London respect your bias?
   □ Strong move in one direction = confirms bias
   □ Choppy range = reconsider bias

C. Pre-NY Session (8:30AM-9:30AM EST):
   □ Are we still aligned with bias?
   □ Any major news that could change bias?
   □ Final confirmation before trading


STEP 4: Final Bias Decision
---------------------------

Combine all factors to determine:

BULLISH BIAS when:
✓ Weekly structure is bullish
✓ Price in discount of weekly range
✓ Previous day closed strong (upper portion)
✓ PDH was broken
✓ London session pushed higher
✓ Daily FVGs below current price
✓ Clear higher timeframe target above

BEARISH BIAS when:
✓ Weekly structure is bearish
✓ Price in premium of weekly range
✓ Previous day closed weak (lower portion)
✓ PDL was broken
✓ London session pushed lower
✓ Daily FVGs above current price
✓ Clear higher timeframe target below

NEUTRAL/NO BIAS when:
⚠ Conflicting signals from multiple timeframes
⚠ Price in middle of ranges (weekly, daily)
⚠ Choppy, overlapping price action
⚠ Major news pending
⚠ Friday afternoon / Holiday weeks

═══════════════════════════════════════════════════════════════════
BULLISH DAILY BIAS - COMPLETE BREAKDOWN
═══════════════════════════════════════════════════════════════════

What It Means:
-------------
You expect price to move higher during the trading day. You will ONLY 
take long (buy) setups and will ignore all short opportunities.

Primary Signals:
---------------
1. Breaking Above PDH (Previous Day High)
   • Most important signal
   • Shows buying pressure overwhelming sellers
   • Often happens during London or NY open
   • Retest of PDH as support = high probability long

2. Strong Close Previous Day
   • Closed in upper 25% of daily range
   • Closed above daily 50%
   • Bullish engulfing close
   • Closed near session highs

3. Weekly Range Positioning
   • Price in discount (lower third)
   • Price at weekly 50% with bullish structure
   • Bouncing off weekly low

4. Market Structure
   • Higher highs and higher lows on daily
   • Recent MSS (Market Structure Shift) to bullish
   • Break of bearish structure

5. London Session Confirmation
   • London opens and pushes higher
   • Breaks Asian high
   • Creates bullish FVGs
   • Sweeps sell-side liquidity then rallies

Trading with Bullish Bias:
-------------------------
DO:
✓ Only enter long positions
✓ Look for bullish FVGs to enter
✓ Buy at order blocks
✓ Enter on pullbacks to discount
✓ Target previous highs, liquidity pools
✓ Add to winners, scale in on strength

DON'T:
✗ Take ANY short positions
✗ Fade the rally "because it's extended"
✗ Fight the bias
✗ Enter at premium levels
✗ Sell into strength


═══════════════════════════════════════════════════════════════════
BEARISH DAILY BIAS - COMPLETE BREAKDOWN
═══════════════════════════════════════════════════════════════════

What It Means:
-------------
You expect price to move lower during the trading day. You will ONLY 
take short (sell) setups and will ignore all long opportunities.

Primary Signals:
---------------
1. Breaking Below PDL (Previous Day Low)
   • Most important signal
   • Shows selling pressure overwhelming buyers
   • Often happens during London or NY open
   • Retest of PDL as resistance = high probability short

2. Weak Close Previous Day
   • Closed in lower 25% of daily range
   • Closed below daily 50%
   • Bearish engulfing close
   • Closed near session lows

3. Weekly Range Positioning
   • Price in premium (upper third)
   • Price at weekly 50% with bearish structure
   • Rejected from weekly high

4. Market Structure
   • Lower highs and lower lows on daily
   • Recent MSS (Market Structure Shift) to bearish
   • Break of bullish structure

5. London Session Confirmation
   • London opens and pushes lower
   • Breaks Asian low
   • Creates bearish FVGs
   • Sweeps buy-side liquidity then dumps

Trading with Bearish Bias:
-------------------------
DO:
✓ Only enter short positions
✓ Look for bearish FVGs to enter
✓ Sell at order blocks
✓ Enter on rallies to premium
✓ Target previous lows, liquidity pools
✓ Add to winners, scale in on weakness

DON'T:
✗ Take ANY long positions
✗ Try to catch the bottom
✗ Fight the bias
✗ Enter at discount levels
✗ Buy into weakness


═══════════════════════════════════════════════════════════════════
BIAS CHANGES - WHEN AND HOW
═══════════════════════════════════════════════════════════════════

Your daily bias should be STABLE, but it can change if:

Valid Reasons to Change Bias:
-----------------------------
1. Market Structure Shift (MSS) on Daily Chart
   • Clear break of structure
   • Change of character (CHoCH)
   • New swing high/low formed

2. Major News Event
   • Fed decision opposite to bias
   • Unexpected economic data
   • Geopolitical shock

3. Weekly Level Rejection
   • Strong rejection at weekly high (bearish)
   • Strong rejection at weekly low (bullish)
   • Clear reversal pattern

4. Complete Invalidation
   • PDH broken on bearish bias
   • PDL broken on bullish bias
   • Bias targets reached, no clear continuation

Invalid Reasons (Don't Change Bias):
-----------------------------------
✗ Small pullback against bias
✗ 1-2 losing trades
✗ Lower timeframe chop
✗ Emotional reaction
✗ "Feeling" like it might reverse
✗ Impatience

How to Change Bias Mid-Day:
---------------------------
1. Close ALL current positions
2. Reassess on higher timeframes
3. Wait 30-60 minutes for confirmation
4. Make new bias decision
5. Write it down
6. Trade new bias cautiously (smaller size)


═══════════════════════════════════════════════════════════════════
NEUTRAL/NO BIAS DAYS
═══════════════════════════════════════════════════════════════════

Sometimes the best bias is NO bias. These are days to reduce trading 
or sit out completely.

Neutral Bias Signals:
--------------------
• Price in middle of weekly range (45-55%)
• Price in middle of daily range
• Choppy overlapping candles
• No clear structure (ranging)
• Conflicting signals across timeframes
• Low volume periods (holidays)

What To Do on Neutral Days:
---------------------------
Option 1: Don't Trade
• Best option for most traders
• Preserve capital
• Study and prepare
• Wait for clear bias to emerge

Option 2: Reduce Size by 50-75%
• Only trade highest probability setups
• Wider stops
• Smaller targets
• No scaling

Option 3: Trade Both Directions (Advanced Only)
• Scalp quick moves in both directions
• Must have strict rules
• High skill required
• Easy to overtrade


═══════════════════════════════════════════════════════════════════
DAILY BIAS CHECKLIST
═══════════════════════════════════════════════════════════════════

Use this checklist EVERY day before trading:

□ WEEKLY ANALYSIS
  □ Weekly trend direction?
  □ Price in premium, equilibrium, or discount?
  □ Key weekly levels identified?

□ DAILY ANALYSIS  
  □ Daily market structure direction?
  □ Previous day close strong or weak?
  □ PDH or PDL broken?
  □ Daily targets identified?

□ SESSION ANALYSIS
  □ Asian session review?
  □ London session confirmation?
  □ Any major news today?

□ BIAS DECISION
  □ Bullish, Bearish, or Neutral?
  □ Written down and committed?
  □ Trading plan aligned with bias?

□ EXECUTION RULES
  □ Only trading in bias direction?
  □ Entry setups identified?
  □ Risk management in place?


═══════════════════════════════════════════════════════════════════
COMMON MISTAKES & SOLUTIONS
═══════════════════════════════════════════════════════════════════

Mistake #1: No Daily Bias at All
❌ Problem: Taking random trades in both directions
✓ Solution: Force yourself to choose a bias BEFORE trading

Mistake #2: Changing Bias Too Often
❌ Problem: Switching bias every hour based on lower TF
✓ Solution: Only change on daily structure shift

Mistake #3: Trading Against Your Bias
❌ Problem: "Just this one short even though bias is bullish"
✓ Solution: Write down bias, make it visible, NO exceptions

Mistake #4: Using Only One Factor
❌ Problem: "PDH broken so I'm bullish" (ignoring weekly premium)
✓ Solution: Use complete analysis process (weekly + daily + session)

Mistake #5: No Bias on Neutral Days
❌ Problem: Forcing trades when no clear direction
✓ Solution: Accept some days aren't tradeable, sit out

Mistake #6: Emotional Bias Changes
❌ Problem: Changing bias after 2 losses
✓ Solution: Trust your analysis, stick to plan

Mistake #7: Ignoring London Session
❌ Problem: Setting bias before London open
✓ Solution: London session is the most important confirmation

Mistake #8: Not Writing It Down
❌ Problem: "I think I had a bullish bias... or was it neutral?"
✓ Solution: Write bias in trading journal every day


═══════════════════════════════════════════════════════════════════
ADVANCED BIAS CONCEPTS
═══════════════════════════════════════════════════════════════════

Multiple Timeframe Bias Alignment:
----------------------------------
• Monthly Bias: Long-term trend (check once per month)
• Weekly Bias: Medium-term trend (check Sunday)
• Daily Bias: Short-term trend (check each evening)

Best Trades: All three aligned
Good Trades: Weekly + Daily aligned
Risky Trades: Only Daily bias (against weekly/monthly)

Session-Specific Bias:
---------------------
Some traders use different bias for different sessions:
• Asian Session: Often ranging, lighter bias
• London Session: Sets the daily tone, strongest bias
• NY Morning: Confirms or reverses London
• NY Afternoon: Often continuation of morning

This is advanced - stick to single daily bias first.

Bias Strength Levels:
--------------------
Not all bias is equal in strength:

Strong Bias (Trade Full Size):
• All timeframes aligned
• Clear structure break
• In optimal weekly position
• London confirms strongly

Medium Bias (Reduce Size 50%):
• Some timeframe conflict
• Weaker confirmation signals
• Less optimal positioning

Weak Bias (Trade Small or Skip):
• Conflicting signals
• Choppy price action
• Near equilibrium
• Low conviction
''',
    
    'how_to_identify': '''
═══════════════════════════════════════════════════════════════════
DAILY BIAS IDENTIFICATION - STEP BY STEP
═══════════════════════════════════════════════════════════════════

EVENING ROUTINE (Night Before Trading):
---------------------------------------

1. Open Weekly Chart
   □ Draw weekly high and low
   □ Calculate 50% level
   □ Identify current position (premium/discount/equilibrium)
   □ Note weekly trend direction
   
2. Open Daily Chart
   □ Identify daily trend (higher highs/lows or lower highs/lows)
   □ Mark previous day high (PDH) and low (PDL)
   □ Note where we closed (upper, middle, or lower portion)
   □ Draw daily FVGs
   □ Mark daily order blocks
   
3. Check Market Structure
   □ Any recent structure breaks?
   □ Are we making new highs/lows?
   □ Or consolidating in range?
   
4. Make Initial Bias Assessment
   □ If weekly discount + daily bullish structure = Lean Bullish
   □ If weekly premium + daily bearish structure = Lean Bearish
   □ If conflicting signals = Neutral (wait for confirmation)


MORNING ROUTINE (Before Market Open):
-------------------------------------

5. Review Asian Session (7PM-2AM EST)
   □ Did it break PDH or PDL?
   □ Create any significant FVGs?
   □ Sweep liquidity?
   
6. Review London Session (2AM-5AM EST) - MOST IMPORTANT
   □ Did London push higher (bullish) or lower (bearish)?
   □ Was the move impulsive or choppy?
   □ Did it align with your evening assessment?
   
7. Check Pre-Market (8:30AM-9:30AM EST)
   □ Any major news releases?
   □ Current price action confirming or denying bias?
   
8. FINAL BIAS DECISION
   Write down one of three:
   □ BULLISH BIAS - Only longs today
   □ BEARISH BIAS - Only shorts today
   □ NEUTRAL/NO BIAS - Reduced trading or skip


VISUAL IDENTIFICATION GUIDE:
----------------------------

Bullish Bias Looks Like:
✓ Price closing near highs each day
✓ Breaks above previous day highs
✓ Green candles dominating
✓ Higher lows forming
✓ Bouncing off weekly lows
✓ London session gaps up or pushes higher

Bearish Bias Looks Like:
✓ Price closing near lows each day
✓ Breaks below previous day lows
✓ Red candles dominating
✓ Lower highs forming
✓ Rejected from weekly highs
✓ London session gaps down or pushes lower

Neutral/No Bias Looks Like:
⚠ Overlapping candles
⚠ Small bodies, long wicks
⚠ Price in middle of ranges
⚠ No clear direction
⚠ Inside days stacking up
⚠ London session choppy/ranging
''',
    
    'trading_rules': '''
═══════════════════════════════════════════════════════════════════
DAILY BIAS TRADING RULES - NON-NEGOTIABLE
═══════════════════════════════════════════════════════════════════

RULE #1: Determine Bias BEFORE Trading
--------------------------------------
• Never open positions without knowing your bias
• Write it down in your journal
• Make it visible on your trading screen
• If unsure, default to NEUTRAL (don't trade)

RULE #2: Trade ONLY in Bias Direction
-------------------------------------
• Bullish Bias = ONLY long positions, ZERO shorts
• Bearish Bias = ONLY short positions, ZERO longs
• Neutral Bias = Significantly reduced trading
• NO EXCEPTIONS - this rule makes or breaks traders

RULE #3: Bias Overrides All Lower Timeframe Signals
--------------------------------------------------
• Perfect 5M short setup + Bullish daily bias = SKIP THE TRADE
• Never let lower timeframe setups override your bias
• Daily structure is king

RULE #4: Require London Session Confirmation
-------------------------------------------
• London (2AM-5AM EST) must confirm your bias
• If London contradicts, reconsider bias
• Best trades are when London strongly confirms

RULE #5: Change Bias Only on Structure Shift
-------------------------------------------
• Don't change bias based on feelings or small moves
• Require daily market structure shift (MSS)
• Or clear invalidation (PDH break on bearish bias)
• Write down reason for change

RULE #6: Reduce Size on Neutral Days
------------------------------------
• Cut position size by 50-75% minimum
• Or don't trade at all (often better choice)
• Never force trades on unclear days

RULE #7: Align with Weekly Range
--------------------------------
• Bullish bias works best in discount
• Bearish bias works best in premium
• Trading from wrong range = lower win rate

RULE #8: No Bias Means No Trading
---------------------------------
• If you can't determine clear bias = Don't trade
• Preservation of capital > forcing trades
• Come back tomorrow with clearer picture

POSITION SIZING BASED ON BIAS STRENGTH:
---------------------------------------
Strong Bias (all timeframes aligned):
• Trade full position size
• Can scale into winners
• Hold for larger targets

Medium Bias (some alignment):
• Trade 50% normal size
• Smaller targets
• No scaling

Weak/Neutral Bias:
• Trade 25% normal size or skip
• Quick scalps only
• No holds
''',
    
    'examples': '''
═══════════════════════════════════════════════════════════════════
REAL-WORLD DAILY BIAS EXAMPLES
═══════════════════════════════════════════════════════════════════

Example 1: Perfect Bullish Bias Setup (EUR/USD)
-----------------------------------------------
Sunday Night Analysis:
• Weekly: Trending higher, price at weekly 50% support
• Weekly bias: Bullish

Monday Evening:
• Previous day closed strong (upper 25% of range)
• Daily structure: Higher highs, higher lows
• Daily FVG below at 1.0850
• Assessment: Bullish bias likely

Tuesday Morning:
• Asian: Held above PDL, created small range
• London: Gapped up at open, pushed to new high
• London broke PDH at 1.0920
• Pre-NY: Consolidated, still above PDH

FINAL BIAS: STRONG BULLISH
• All timeframes aligned
• London confirmed strongly
• In weekly discount

Trading Plan:
• ONLY look for longs
• Buy pullbacks to FVG at 1.0850
• Buy retests of broken PDH
• Target: Previous weekly high at 1.0980

Result:
• Price pulled back to 1.0860 (near FVG)
• Entered long at 1.0865
• Stop at 1.0845 (20 pips)
• Target 1 hit at 1.0920 (55 pips)
• Target 2 hit at 1.0980 (115 pips)
• Risk:Reward = 1:5.75

Key Lesson: Strong bias + patient entry = big winners


Example 2: Failed to Respect Bearish Bias (Costly Mistake)
---------------------------------------------------------
Monday Evening Analysis:
• Weekly: In premium (expensive area)
• Daily: Broke below PDL
• Clear BEARISH BIAS

Tuesday Morning:
• London confirmed, pushed lower
• Created bearish FVG at 1.1050

Mistake Made:
• 10:30 AM - saw "perfect" 15M bullish FVG
• Thought "quick scalp won't hurt"
• Entered long at 1.1025
• Violated Rule #2 (only trade in bias direction)

Result:
• Price immediately rejected
• Stopped out at 1.1010 (-15 pips)
• Then price continued down to 1.0950 (-75 pips from entry)
• Would have been perfect short if followed bias!

Key Lesson: NEVER trade against your daily bias, no matter how good the lower timeframe setup looks


Example 3: Neutral Bias - Avoided Losses
----------------------------------------
Wednesday Evening:
• Weekly: Middle of range (50%)
• Daily: Inside day, closed middle of range
• Choppy overlapping candles

Thursday Morning:
• Asian: Choppy, no clear direction
• London: Opened flat, ranged 20 pips
• No clear bias signals

FINAL BIAS: NEUTRAL - Don't Trade

What Happened:
• Sat out the entire day
• Market chopped in 40-pip range all day
• Would have been stopped out 3-4 times
• Preserved capital
• Used day for study and preparation

Result:
• 0 pips lost
• Mental capital preserved
• Ready for Friday's clear bias

Key Lesson: Not trading is sometimes the best trade


Example 4: Bias Change Mid-Day (Rare but Valid)
-----------------------------------------------
Monday Morning:
• Initial Bias: BULLISH
• PDH broken at 1.0950
• London pushed higher

11:00 AM Event:
• Unexpected Fed hawkish comments
• Market structure shift on daily
• Clear break of daily structure
• PDL broken

New Analysis:
• Daily structure now bearish
• Weekly rejected from premium
• London rally completely reversed

BIAS CHANGE: Bullish → BEARISH
• Closed all long positions (small loss)
• Waited 30 minutes for confirmation
• New bias: BEARISH

New Trading Plan:
• Only shorts
• Look for bearish FVGs
• Target previous lows

Result:
• Entered short at 1.0920 (broken PDL retest)
• Stop at 1.0935
• Target at 1.0850
• Hit target next day
• Profit: +70 pips

Key Lesson: Valid bias changes are rare but important to recognize


Example 5: Weekly Range Position Override
-----------------------------------------
Tuesday Analysis:
• Daily: Bullish structure (higher highs/lows)
• PDH broken
• London pushed higher
• Seems like clear bullish bias...

BUT:
• Weekly: Price in extreme premium (top 10%)
• At major weekly resistance
• Multiple bearish FVGs above
• Weekly bearish order block

BIAS DECISION: Neutral (conflicting signals)
• Daily says bullish
• Weekly says bearish
• Don't force it

Better Approach:
• Wait for daily to align with weekly
• Or wait for clear weekly level rejection
• Skip trading this day

What Happened:
• Price rallied another 20 pips
• Then rejected hard from weekly level
• Dropped 150 pips over next 2 days
• Saved from being caught in reversal

Key Lesson: When daily and weekly conflict, the weekly wins. Be patient.
''',
    
    'related_concepts': [
        'Weekly Range',
        'Previous Day High/Low (PDH/PDL)',
        'Market Structure Shift (MSS)',
        'Premium and Discount Pricing',
        'Killzones',
        'Fair Value Gaps (FVG)',
        'Order Blocks',
        'Liquidity Sweeps',
        'Change of Character (CHoCH)'
    ],
    
    'resources': [
        'ICT 2022 Mentorship - Core Content on Daily Bias',
        'ICT YouTube - "How to Determine Daily Bias" video',
        'Trading Journal Template - Track your daily bias decisions',
        'Weekly Chart Review - Sunday routine checklist',
        'London Session Analysis - Most important for bias confirmation',
        'Practice: Write down bias for 30 days before trading live'
    ]
}
